"use strict";jQuery(document).ready(function(n){if(0!==n('input[name="section"][value="facebookcommerce"]').closest("form").length){n('input[type="checkbox"].toggle-fields-group').on("change",function(e){n(this).hasClass("product-sync-field")?o(n(".product-sync-field").not(".toggle-fields-group"),n(this).is(":checked")):n(this).hasClass("messenger-field")?o(n(".messenger-field").not(".toggle-fields-group"),n(this).is(":checked")):n(this).hasClass("resync-schedule-field")&&o(n(".resync-schedule-field").not(".toggle-fields-group"),n(this).is(":checked"))}).trigger("change"),n("#woocommerce_facebookcommerce_scheduled_resync_hours, #woocommerce_facebookcommerce_scheduled_resync_minutes").on("input change keyup keydown keypress click",function(){var e=n(this).val();!isNaN(e)&&1===e.length&&e<10&&n(this).val(e.padStart(2,"0"))}).trigger("change"),n("textarea#woocommerce_facebookcommerce_messenger_greeting").on("focus change keyup keydown keypress",function(){var e=parseInt(window.facebookAdsToolboxConfig.messengerGreetingMaxCharacters,10),o=n(this).val().length,c=n("span.characters-counter"),s=c.find("span");c.html(o+" / "+e+"<br/>").append(s).css("display","block"),e<o?c.css("color","#DC3232").find("span").show():c.css("color","#999999").find("span").hide()});var i=!1;n(".woocommerce-save-button").on("click",function(e){if(i)return!0;e.preventDefault();var c=n(this),s=function(){var e=n("#woocommerce_facebookcommerce_excluded_product_category_ids").val(),o=[];return window.facebookAdsToolboxConfig&&window.facebookAdsToolboxConfig.excludedCategoryIDs&&(o=window.facebookAdsToolboxConfig.excludedCategoryIDs),n(e).not(o).get()}(),t=function(){var e=n("#woocommerce_facebookcommerce_excluded_product_tag_ids").val(),o=[];return window.facebookAdsToolboxConfig&&window.facebookAdsToolboxConfig.excludedTagIDs&&(o=window.facebookAdsToolboxConfig.excludedTagIDs),n(e).not(o).get()}();0<s.length||0<t.length?n.post(facebook_for_woocommerce_settings_sync.ajax_url,{action:"facebook_for_woocommerce_set_excluded_terms_prompt",security:facebook_for_woocommerce_settings_sync.set_excluded_terms_prompt_nonce,categories:s,tags:t},function(e){e&&!e.success?(n("#wc-backbone-modal-dialog .modal-close").trigger("click"),new n.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:e.data}),n(".facebook-for-woocommerce-confirm-settings-change").on("click",function(){if(blockModal(),n(this).hasClass("hide-products")){var e=[],o=[];n(s).each(function(){e.push({term_id:this,taxonomy:"product_cat",visibility:!1})}),n(t).each(function(){o.push({term_id:this,taxonomy:"product_tag",visibility:!1})}),n.post(facebook_for_woocommerce_settings_sync.ajax_url,{action:"facebook_for_woocommerce_set_products_visibility",security:facebook_for_woocommerce_settings_sync.set_product_visibility_nonce,product_categories:e,product_tags:o},function(e){e&&e.success||console.log(e),i=!0,c.trigger("click")})}else i=!0,c.trigger("click")})):(i=!0,c.trigger("click"))}):(i=!0,c.trigger("click"))})}function o(e,o){n(e).each(function(){var e=n(this);n(this).hasClass("wc-enhanced-select")&&(e=n(this).next("span.select2-container")),o?e.css("pointer-events","all").css("opacity","1.0"):e.css("pointer-events","none").css("opacity","0.4")})}});